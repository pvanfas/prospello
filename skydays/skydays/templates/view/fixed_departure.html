{% extends 'view/base.html' %}
{% block title %}Fixed Departure Enquiry{% endblock %}
{% block content %}

<p>
  You have received a new Fixed Package Enquiry from your website. The details of the message are as follows
</p>

<table class="m-0">
  <tr>
    <td><strong>Order ID</strong></td>
    <td>{{ instance.order_id }}</td>
  </tr>
  <tr>
    <td><strong>Name</strong></td>
    <td>: {{ instance.name }}</td>
  </tr>
  <tr>
    <td><strong>Whatsapp</strong></td>
    <td>: {{ instance.whatsapp }}</td>
  </tr>
  <tr>
    <td><strong>Phone</strong></td>
    <td>: {{ instance.phone }}</td>
  </tr>
  <tr>
    <td><strong>Email</strong></td>
    <td>: {{ instance.email }}</td>
  </tr>
  <tr>
    <td><strong>Total Payment</strong></td>
    <td>: {{ instance.get_price }}</td>
  </tr>
  <tr>
    <td><strong>Payment Method</strong></td>
    <td>: {{ instance.get_payment_method_display }}</td>
  </tr>
  <tr>
    <td><strong>Timestamp</strong></td>
    <td>: {{ instance.timestamp }}</td>
  </tr>
</table>

{% if instance.get_rooms %}
<table style="width:100%" class="bordered">
  <tr>
    <th>Room</th>
    <th>Adult</th>
    <th>Child with Bed</th>
    <th>Child without Bed</th>
    <th>Infant</th>
  </tr>
  {% for traveller in instance.get_rooms %}
  <tr class="text-center">
    <td>Room {{ forloop.counter }}</td>
    <td>{{ traveller.adult }}</td>
    <td>{{ traveller.child_with_bed }}</td>
    <td>{{ traveller.child_without_bed }}</td>
    <td>{{ traveller.infant }}</td>
  </tr>
  {% endfor %}
</table>
{% endif %}

{% if instance.get_travellers %}
<table style="width:100%" class="bordered">
  <tr>
    <th></th>
    <th>Title</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Date of Birth</th>
    <th>Age</th>
    <th>Passport Number</th>
    <th>Passport Expiry</th>
    <th>Meal Preferance</th>
  </tr>
  {% for traveller in instance.get_travellers %}
  <tr class="text-center">
    <td>{{ forloop.counter }}</td>
    <td>{{ traveller.get_title_display }}</td>
    <td>{{ traveller.first_name }}</td>
    <td>{{ traveller.last_name }}</td>
    <td>{{ traveller.date_of_birth }}</td>
    <td>{{ traveller.age }}</td>
    <td>{{ traveller.passport_number }}</td>
    <td>{{ traveller.passport_expiry }}</td>
    <td>{{ traveller.get_meal_preference_display }}</td>
  </tr>
  {% endfor %}
</table>
{% endif %}

{% endblock %}